<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="visualizemi">
<title>visualizemi Tutorial • visualizemi</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="visualizemi Tutorial">
<meta property="og:description" content="visualizemi">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">visualizemi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Package-Tutorial.html">visualizemi Tutorial</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>visualizemi Tutorial</h1>
            
      
      
      <div class="d-none name"><code>Package-Tutorial.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://www.aggieerin.com/visualizemi/" class="external-link">visualizemi</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lavaan.ugent.be" class="external-link">lavaan</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; This is lavaan 0.6-17</span></span>
<span><span class="co">#&gt; lavaan is FREE software! Please report any bugs.</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://yihui.org/knitr/" class="external-link">knitr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">introdataviz</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://wilkelab.org/ggridges/" class="external-link">ggridges</a></span><span class="op">)</span></span></code></pre></div>
<p>Measurement invariance is typically analyzed using confirmatory
factor analysis, specifically, multi-group confirmatory factor analysis
(MGCFA) or less often, with item response theory <span class="citation">(Stark, Chernyshenko, and Drasgow 2006; Tay, Meade, and
Cao 2015)</span>. First, the model is examined with the factor structure
proposed for the latent and observed variables, and then often these
models are assessed for each group separately. The two models are then
combined together into one nested CFA in order to determine configural
invariance. Configural invariance tests if the proposed factor structure
is the same between groups. In this model, all other estimated
parameters are allowed to vary between groups. The general approach is
to use this model as a baseline for starting a sequential analysis of
further restrictions between group parameters (i.e., more restrictive
with each step). However, models without configural invariance can occur
and often point to misspecification for the observed and latent
variables within one group (i.e., cross loadings of items onto other
latent variables or correlated error terms for one group only).</p>
<p>Next, the estimated parameter between each observed variable and its
latent variable are constrained to be equal between groups for metric
invariance. For example, item 1’s factor loading must be equal to item
1’s factor loading for each group. This test examines if the items
represent the same relationship to the latent variable, or if specific
items have weaker or stronger relationships in specific groups. Finding
non-invariance at this stage generally points to items that have
different functioning or interpretation for one group. At the third
model, the item intercepts (i.e., item averages) are restricted across
groups for scalar invariance. Scalar non-invariance would indicate that
items have the same strength of relationship with their latent variable,
just one group has a higher overall average on that item. Last (although
sometimes not used), we may consider constraining error variances for
each observed variable to be equal across groups for strict invariance.
Strict non-invariance can occur when one group has a higher range of
values on the observed variable, thus showing a larger variance. For
example, if using a Likert scale, one group may use the full 1 to 7
range (creating a flatter distribution and larger variance), while the
other group shows a ceiling effect of only using 5 to 7.</p>
<div class="section level2">
<h2 id="multigroup-analysis">Multigroup analysis<a class="anchor" aria-label="anchor" href="#multigroup-analysis"></a>
</h2>
<p>If you are interested in measurement invariance, you would likely
want to conduct a multigroup factor analysis (MGCFA) to compare two or
more groups on proposed model structure. This generally consists of
steps of models with increasing restrictions between groups to constrain
parameters to be equal across groups. Invariance is achieved by showing
that two groups have equal values on the model, and non-invariance
occurs when they do not show the same values. Check out excellent book
chapters by <span class="citation">Brown (2015)</span> and <span class="citation">Kline (2016)</span> to learn more about theoretical
backgrounds and ideas behind MGCFA.</p>
<p>In <em>R</em>, MGCFA can be achieved by using <code>lavaan</code> - a
structural equation modeling package that covers a large range of
possible modeling options <span class="citation">(Rosseel 2012)</span>.
Their tutorial on multigroups can be found at: <a href="https://lavaan.ugent.be/tutorial/groups.html" class="external-link uri">https://lavaan.ugent.be/tutorial/groups.html</a>.
<code>visualizemi</code> includes a MGCFA convenience function that
flexibly calculates the following:</p>
<ol style="list-style-type: decimal">
<li>An overall model without groups</li>
<li>Individual group based models</li>
<li>A “configural” model wherein both groups are put together into one
model with no constraints</li>
<li>User entered constraint based models</li>
</ol>
<p>Additionally, the function returns a list of coefficients and fit
statistics for comparison using your favorite rules for determining
measurement invariance.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">HS.model</span> <span class="op">&lt;-</span> <span class="st">' visual  =~ x1 + x2 + x3</span></span>
<span><span class="st">              textual =~ x4 + x5 + x6</span></span>
<span><span class="st">              speed   =~ x7 + x8 + x9 '</span></span>
<span></span>
<span>                    <span class="co"># cfa model</span></span>
<span><span class="va">saved_mgcfa</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mgcfa.html">mgcfa</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">HS.model</span>,</span>
<span>                     <span class="co"># dataset in data frame </span></span>
<span>                     data <span class="op">=</span> <span class="va">HolzingerSwineford1939</span>, </span>
<span>                     <span class="co"># grouping variable column </span></span>
<span>                     group <span class="op">=</span> <span class="st">"sex"</span>,</span>
<span>                     <span class="co"># lavaan syntax for group constraints</span></span>
<span>                     group.equal <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"loadings"</span>, <span class="st">"intercepts"</span>, <span class="st">"residuals"</span><span class="op">)</span>, </span>
<span>                     <span class="co"># any other lavaan cfa arguments</span></span>
<span>                     meanstructure <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># note you can also include sample.nobs, sample.cov, and sample.mean if </span></span>
<span><span class="co"># you only have the correlation or covariance matrices</span></span></code></pre></div>
<p>These outputs get very long, so here’s a summary of what’s available
- models are full <code>lavaan</code> model structure, so you can use
<code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code>, <code><a href="https://rdrr.io/pkg/lavaan/man/parameterEstimates.html" class="external-link">parameterEstimates()</a></code>,
<code><a href="https://rdrr.io/pkg/lavaan/man/fitMeasures.html" class="external-link">fitmeasures()</a></code>, and so on with them. They are commented out
to save space in this tutorial.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">saved_mgcfa</span><span class="op">$</span><span class="va">model_coef</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="12%">
<col width="2%">
<col width="9%">
<col width="9%">
<col width="9%">
<col width="7%">
<col width="9%">
<col width="9%">
<col width="9%">
<col width="7%">
<col width="5%">
<col width="5%">
<col width="5%">
</colgroup>
<thead><tr class="header">
<th align="left">term</th>
<th align="left">op</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
<th align="right">std.lv</th>
<th align="right">std.all</th>
<th align="right">std.nox</th>
<th align="left">model</th>
<th align="right">block</th>
<th align="right">group</th>
<th align="left">label</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">visual =~ x1</td>
<td align="left">=~</td>
<td align="right">1.0000000</td>
<td align="right">0.0000000</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">0.8996199</td>
<td align="right">0.7718804</td>
<td align="right">0.7718804</td>
<td align="left">Overall</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">visual =~ x2</td>
<td align="left">=~</td>
<td align="right">0.5535003</td>
<td align="right">0.0996651</td>
<td align="right">5.553601</td>
<td align="right">0</td>
<td align="right">0.4979399</td>
<td align="right">0.4236010</td>
<td align="right">0.4236010</td>
<td align="left">Overall</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">visual =~ x3</td>
<td align="left">=~</td>
<td align="right">0.7293702</td>
<td align="right">0.1091097</td>
<td align="right">6.684742</td>
<td align="right">0</td>
<td align="right">0.6561560</td>
<td align="right">0.5811323</td>
<td align="right">0.5811323</td>
<td align="left">Overall</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">textual =~ x4</td>
<td align="left">=~</td>
<td align="right">1.0000000</td>
<td align="right">0.0000000</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">0.9896926</td>
<td align="right">0.8515822</td>
<td align="right">0.8515822</td>
<td align="left">Overall</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">textual =~ x5</td>
<td align="left">=~</td>
<td align="right">1.1130766</td>
<td align="right">0.0654201</td>
<td align="right">17.014288</td>
<td align="right">0</td>
<td align="right">1.1016036</td>
<td align="right">0.8550654</td>
<td align="right">0.8550654</td>
<td align="left">Overall</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">textual =~ x6</td>
<td align="left">=~</td>
<td align="right">0.9261462</td>
<td align="right">0.0554489</td>
<td align="right">16.702711</td>
<td align="right">0</td>
<td align="right">0.9166000</td>
<td align="right">0.8380101</td>
<td align="right">0.8380101</td>
<td align="left">Overall</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">saved_mgcfa</span><span class="op">$</span><span class="va">model_fit</span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="5%">
<col width="5%">
<col width="5%">
<col width="5%">
<col width="5%">
<col width="2%">
<col width="5%">
<col width="9%">
<col width="5%">
<col width="5%">
<col width="5%">
<col width="5%">
<col width="4%">
<col width="8%">
<col width="2%">
<col width="3%">
<col width="5%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="right">agfi</th>
<th align="right">AIC</th>
<th align="right">BIC</th>
<th align="right">cfi</th>
<th align="right">chisq</th>
<th align="right">npar</th>
<th align="right">rmsea</th>
<th align="right">rmsea.conf.high</th>
<th align="right">srmr</th>
<th align="right">tli</th>
<th align="left">converged</th>
<th align="left">estimator</th>
<th align="right">ngroups</th>
<th align="left">missing_method</th>
<th align="right">nobs</th>
<th align="right">norig</th>
<th align="right">nexcluded</th>
<th align="left">model</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">0.9911676</td>
<td align="right">7535.490</td>
<td align="right">7646.703</td>
<td align="right">0.9305597</td>
<td align="right">85.30552</td>
<td align="right">30</td>
<td align="right">0.0921215</td>
<td align="right">0.1136780</td>
<td align="right">0.0595238</td>
<td align="right">0.8958395</td>
<td align="left">TRUE</td>
<td align="left">ML</td>
<td align="right">1</td>
<td align="left">listwise</td>
<td align="right">301</td>
<td align="right">301</td>
<td align="right">0</td>
<td align="left">Overall</td>
</tr>
<tr class="even">
<td align="right">0.9890620</td>
<td align="right">3671.257</td>
<td align="right">3760.765</td>
<td align="right">0.9063262</td>
<td align="right">61.39462</td>
<td align="right">30</td>
<td align="right">0.1033053</td>
<td align="right">0.1356260</td>
<td align="right">0.0748731</td>
<td align="right">0.8594893</td>
<td align="left">TRUE</td>
<td align="left">ML</td>
<td align="right">1</td>
<td align="left">listwise</td>
<td align="right">146</td>
<td align="right">146</td>
<td align="right">0</td>
<td align="left">Group 1</td>
</tr>
<tr class="odd">
<td align="right">0.9911447</td>
<td align="right">3846.376</td>
<td align="right">3937.679</td>
<td align="right">0.9588720</td>
<td align="right">44.40059</td>
<td align="right">30</td>
<td align="right">0.0740542</td>
<td align="right">0.1076979</td>
<td align="right">0.0525321</td>
<td align="right">0.9383081</td>
<td align="left">TRUE</td>
<td align="left">ML</td>
<td align="right">1</td>
<td align="left">listwise</td>
<td align="right">155</td>
<td align="right">155</td>
<td align="right">0</td>
<td align="left">Group 2</td>
</tr>
<tr class="even">
<td align="right">0.9901345</td>
<td align="right">7517.633</td>
<td align="right">7740.060</td>
<td align="right">0.9354408</td>
<td align="right">105.79522</td>
<td align="right">60</td>
<td align="right">0.0894452</td>
<td align="right">0.1125390</td>
<td align="right">0.0633686</td>
<td align="right">0.9031611</td>
<td align="left">TRUE</td>
<td align="left">ML</td>
<td align="right">2</td>
<td align="left">listwise</td>
<td align="right">301</td>
<td align="right">301</td>
<td align="right">0</td>
<td align="left">Configural</td>
</tr>
<tr class="odd">
<td align="right">0.9890567</td>
<td align="right">7526.064</td>
<td align="right">7726.248</td>
<td align="right">0.9193211</td>
<td align="right">126.22602</td>
<td align="right">54</td>
<td align="right">0.0942718</td>
<td align="right">0.1157694</td>
<td align="right">0.0740863</td>
<td align="right">0.8924281</td>
<td align="left">TRUE</td>
<td align="left">ML</td>
<td align="right">2</td>
<td align="left">listwise</td>
<td align="right">301</td>
<td align="right">301</td>
<td align="right">0</td>
<td align="left">loadings</td>
</tr>
<tr class="even">
<td align="right">0.9886175</td>
<td align="right">7532.835</td>
<td align="right">7710.777</td>
<td align="right">0.9050548</td>
<td align="right">144.99757</td>
<td align="right">48</td>
<td align="right">0.0970196</td>
<td align="right">0.1172743</td>
<td align="right">0.0753072</td>
<td align="right">0.8860658</td>
<td align="left">TRUE</td>
<td align="left">ML</td>
<td align="right">2</td>
<td align="left">listwise</td>
<td align="right">301</td>
<td align="right">301</td>
<td align="right">0</td>
<td align="left">intercepts</td>
</tr>
<tr class="odd">
<td align="right">0.9882086</td>
<td align="right">7536.951</td>
<td align="right">7681.528</td>
<td align="right">0.8904046</td>
<td align="right">167.11286</td>
<td align="right">39</td>
<td align="right">0.0972009</td>
<td align="right">0.1160724</td>
<td align="right">0.0925800</td>
<td align="right">0.8856395</td>
<td align="left">TRUE</td>
<td align="left">ML</td>
<td align="right">2</td>
<td align="left">listwise</td>
<td align="right">301</td>
<td align="right">301</td>
<td align="right">0</td>
<td align="left">residuals</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># overall</span></span>
<span><span class="va">saved_mgcfa</span><span class="op">$</span><span class="va">model_overall</span></span>
<span><span class="co">#&gt; lavaan 0.6.17 ended normally after 35 iterations</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Estimator                                         ML</span></span>
<span><span class="co">#&gt;   Optimization method                           NLMINB</span></span>
<span><span class="co">#&gt;   Number of model parameters                        30</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Number of observations                           301</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Model Test User Model:</span></span>
<span><span class="co">#&gt;                                                       </span></span>
<span><span class="co">#&gt;   Test statistic                                85.306</span></span>
<span><span class="co">#&gt;   Degrees of freedom                                24</span></span>
<span><span class="co">#&gt;   P-value (Chi-square)                           0.000</span></span>
<span></span>
<span><span class="co"># groups</span></span>
<span><span class="co"># saved_mgcfa$group_models$model.1</span></span>
<span><span class="co"># saved_mgcfa$group_models$model.2</span></span>
<span></span>
<span><span class="co"># configural</span></span>
<span><span class="co"># saved_mgcfa$model_configural</span></span>
<span></span>
<span><span class="co"># constraints</span></span>
<span><span class="co"># saved_mgcfa$invariance_models$model.loadings</span></span>
<span><span class="co"># saved_mgcfa$invariance_models$model.intercepts</span></span>
<span><span class="co"># saved_mgcfa$invariance_models$model.residuals</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="partial-invariance">Partial invariance<a class="anchor" aria-label="anchor" href="#partial-invariance"></a>
</h2>
<p>Partial invariance occurs when <em>most</em> of the parameter
estimates are the same across groups but not all of them.
<code>visualizemi</code> includes a useful function to investigate which
items are non-invariant. If I use one of the more popular rules of them
for invariance - <span class="math inline">\(\Delta\)</span>CFI &lt;=
.01 - then I could decide that the loadings are not equal across groups
in comparison to the configural model. I would use the
<code><a href="../reference/partial_mi.html">partial_mi()</a></code> function to figure out how the items change
the model with their constraint is relaxed individually across groups.
You get a table of fit indices to review for your favorite invariance
rules and each model saved separately to determine partial
invariance.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>                            <span class="co"># a saved model from mgcfa or any lavaan model</span></span>
<span><span class="va">saved_partial</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/partial_mi.html">partial_mi</a></span><span class="op">(</span>saved_model <span class="op">=</span> <span class="va">saved_mgcfa</span><span class="op">$</span><span class="va">invariance_models</span><span class="op">$</span><span class="va">model.loadings</span>,</span>
<span>                            <span class="co"># dataframe of the original data</span></span>
<span>                            data <span class="op">=</span> <span class="va">HolzingerSwineford1939</span>, </span>
<span>                            <span class="co"># model syntax from lavaan</span></span>
<span>                            model <span class="op">=</span> <span class="va">HS.model</span>, </span>
<span>                            <span class="co"># group variable column</span></span>
<span>                            group <span class="op">=</span> <span class="st">"sex"</span>,</span>
<span>                            <span class="co"># the equality constraints you have in the model</span></span>
<span>                            group.equal <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"loadings"</span><span class="op">)</span>,</span>
<span>                            <span class="co"># which step to test the partial invariance on</span></span>
<span>                            partial_step <span class="op">=</span> <span class="st">"loadings"</span><span class="op">)</span></span>
<span><span class="co"># note that the group.equal and partial_step are not always the same </span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">saved_partial</span><span class="op">$</span><span class="va">fit_table</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="2%">
<col width="0%">
<col width="1%">
<col width="1%">
<col width="0%">
<col width="2%">
<col width="2%">
<col width="2%">
<col width="2%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="3%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="2%">
<col width="2%">
<col width="2%">
<col width="2%">
<col width="2%">
<col width="3%">
<col width="3%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="2%">
<col width="3%">
<col width="1%">
<col width="2%">
<col width="1%">
<col width="3%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
</colgroup>
<thead><tr class="header">
<th align="left">free.parameter</th>
<th align="right">npar</th>
<th align="right">fmin</th>
<th align="right">chisq</th>
<th align="right">df</th>
<th align="right">pvalue</th>
<th align="right">baseline.chisq</th>
<th align="right">baseline.df</th>
<th align="right">baseline.pvalue</th>
<th align="right">cfi</th>
<th align="right">tli</th>
<th align="right">nnfi</th>
<th align="right">rfi</th>
<th align="right">nfi</th>
<th align="right">pnfi</th>
<th align="right">ifi</th>
<th align="right">rni</th>
<th align="right">logl</th>
<th align="right">unrestricted.logl</th>
<th align="right">aic</th>
<th align="right">bic</th>
<th align="right">ntotal</th>
<th align="right">bic2</th>
<th align="right">rmsea</th>
<th align="right">rmsea.ci.lower</th>
<th align="right">rmsea.ci.upper</th>
<th align="right">rmsea.ci.level</th>
<th align="right">rmsea.pvalue</th>
<th align="right">rmsea.close.h0</th>
<th align="right">rmsea.notclose.pvalue</th>
<th align="right">rmsea.notclose.h0</th>
<th align="right">rmr</th>
<th align="right">rmr_nomean</th>
<th align="right">srmr</th>
<th align="right">srmr_bentler</th>
<th align="right">srmr_bentler_nomean</th>
<th align="right">crmr</th>
<th align="right">crmr_nomean</th>
<th align="right">srmr_mplus</th>
<th align="right">srmr_mplus_nomean</th>
<th align="right">cn_05</th>
<th align="right">cn_01</th>
<th align="right">gfi</th>
<th align="right">agfi</th>
<th align="right">pgfi</th>
<th align="right">mfi</th>
<th align="right">ecvi</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">visual =~ x1</td>
<td align="right">54</td>
<td align="right">0.2096778</td>
<td align="right">126.2260</td>
<td align="right">54</td>
<td align="right">1.025522e-07</td>
<td align="right">967.2277</td>
<td align="right">72</td>
<td align="right">0</td>
<td align="right">0.9193211</td>
<td align="right">0.8924281</td>
<td align="right">0.8924281</td>
<td align="right">0.8259961</td>
<td align="right">0.8694971</td>
<td align="right">0.6521228</td>
<td align="right">0.9209113</td>
<td align="right">0.9193211</td>
<td align="right">-3709.032</td>
<td align="right">-3645.919</td>
<td align="right">7526.064</td>
<td align="right">7726.248</td>
<td align="right">301</td>
<td align="right">7554.990</td>
<td align="right">0.09427178</td>
<td align="right">0.07294522</td>
<td align="right">0.1157694</td>
<td align="right">0.9</td>
<td align="right">0.0006413723</td>
<td align="right">0.05</td>
<td align="right">0.8700985</td>
<td align="right">0.08</td>
<td align="right">0.09083246</td>
<td align="right">0.09950198</td>
<td align="right">0.07408629</td>
<td align="right">0.07408629</td>
<td align="right">0.08115747</td>
<td align="right">0.07588300</td>
<td align="right">0.08483978</td>
<td align="right">0.08701594</td>
<td align="right">0.07888117</td>
<td align="right">173.0574</td>
<td align="right">194.3175</td>
<td align="right">0.9945284</td>
<td align="right">0.9890567</td>
<td align="right">0.4972642</td>
<td align="right">0.8869410</td>
<td align="right">0.7781595</td>
</tr>
<tr class="even">
<td align="left">visual =~ x2</td>
<td align="right">55</td>
<td align="right">0.2079012</td>
<td align="right">125.1565</td>
<td align="right">53</td>
<td align="right">9.021992e-08</td>
<td align="right">967.2277</td>
<td align="right">72</td>
<td align="right">0</td>
<td align="right">0.9193987</td>
<td align="right">0.8905039</td>
<td align="right">0.8905039</td>
<td align="right">0.8242152</td>
<td align="right">0.8706028</td>
<td align="right">0.6408604</td>
<td align="right">0.9210738</td>
<td align="right">0.9193987</td>
<td align="right">-3708.497</td>
<td align="right">-3645.919</td>
<td align="right">7526.994</td>
<td align="right">7730.885</td>
<td align="right">301</td>
<td align="right">7556.457</td>
<td align="right">0.09511119</td>
<td align="right">0.07364915</td>
<td align="right">0.1167678</td>
<td align="right">0.9</td>
<td align="right">0.0005618577</td>
<td align="right">0.05</td>
<td align="right">0.8813839</td>
<td align="right">0.08</td>
<td align="right">0.09049956</td>
<td align="right">0.09913730</td>
<td align="right">0.07397906</td>
<td align="right">0.07397906</td>
<td align="right">0.08104000</td>
<td align="right">0.07625079</td>
<td align="right">0.08525098</td>
<td align="right">0.08660733</td>
<td align="right">0.07895012</td>
<td align="right">171.7384</td>
<td align="right">193.0223</td>
<td align="right">0.9946187</td>
<td align="right">0.9890343</td>
<td align="right">0.4880999</td>
<td align="right">0.8870434</td>
<td align="right">0.7812509</td>
</tr>
<tr class="odd">
<td align="left">visual =~ x3</td>
<td align="right">55</td>
<td align="right">0.2046712</td>
<td align="right">123.2120</td>
<td align="right">53</td>
<td align="right">1.616199e-07</td>
<td align="right">967.2277</td>
<td align="right">72</td>
<td align="right">0</td>
<td align="right">0.9215707</td>
<td align="right">0.8934546</td>
<td align="right">0.8934546</td>
<td align="right">0.8269462</td>
<td align="right">0.8726132</td>
<td align="right">0.6423403</td>
<td align="right">0.9232007</td>
<td align="right">0.9215707</td>
<td align="right">-3707.525</td>
<td align="right">-3645.919</td>
<td align="right">7525.050</td>
<td align="right">7728.941</td>
<td align="right">301</td>
<td align="right">7554.512</td>
<td align="right">0.09382091</td>
<td align="right">0.07225866</td>
<td align="right">0.1155457</td>
<td align="right">0.9</td>
<td align="right">0.0008021491</td>
<td align="right">0.05</td>
<td align="right">0.8605127</td>
<td align="right">0.08</td>
<td align="right">0.08746822</td>
<td align="right">0.09581663</td>
<td align="right">0.07179944</td>
<td align="right">0.07179944</td>
<td align="right">0.07865235</td>
<td align="right">0.07470824</td>
<td align="right">0.08352635</td>
<td align="right">0.08316932</td>
<td align="right">0.07693722</td>
<td align="right">174.4330</td>
<td align="right">196.0527</td>
<td align="right">0.9946997</td>
<td align="right">0.9891995</td>
<td align="right">0.4881397</td>
<td align="right">0.8899132</td>
<td align="right">0.7747909</td>
</tr>
<tr class="even">
<td align="left">textual =~ x4</td>
<td align="right">54</td>
<td align="right">0.2096778</td>
<td align="right">126.2260</td>
<td align="right">54</td>
<td align="right">1.025522e-07</td>
<td align="right">967.2277</td>
<td align="right">72</td>
<td align="right">0</td>
<td align="right">0.9193211</td>
<td align="right">0.8924281</td>
<td align="right">0.8924281</td>
<td align="right">0.8259961</td>
<td align="right">0.8694971</td>
<td align="right">0.6521228</td>
<td align="right">0.9209113</td>
<td align="right">0.9193211</td>
<td align="right">-3709.032</td>
<td align="right">-3645.919</td>
<td align="right">7526.064</td>
<td align="right">7726.248</td>
<td align="right">301</td>
<td align="right">7554.990</td>
<td align="right">0.09427178</td>
<td align="right">0.07294522</td>
<td align="right">0.1157694</td>
<td align="right">0.9</td>
<td align="right">0.0006413723</td>
<td align="right">0.05</td>
<td align="right">0.8700985</td>
<td align="right">0.08</td>
<td align="right">0.09083246</td>
<td align="right">0.09950198</td>
<td align="right">0.07408629</td>
<td align="right">0.07408629</td>
<td align="right">0.08115747</td>
<td align="right">0.07588300</td>
<td align="right">0.08483978</td>
<td align="right">0.08701594</td>
<td align="right">0.07888117</td>
<td align="right">173.0574</td>
<td align="right">194.3175</td>
<td align="right">0.9945284</td>
<td align="right">0.9890567</td>
<td align="right">0.4972642</td>
<td align="right">0.8869410</td>
<td align="right">0.7781595</td>
</tr>
<tr class="odd">
<td align="left">textual =~ x5</td>
<td align="right">55</td>
<td align="right">0.2087596</td>
<td align="right">125.6733</td>
<td align="right">53</td>
<td align="right">7.719583e-08</td>
<td align="right">967.2277</td>
<td align="right">72</td>
<td align="right">0</td>
<td align="right">0.9188215</td>
<td align="right">0.8897197</td>
<td align="right">0.8897197</td>
<td align="right">0.8234894</td>
<td align="right">0.8700686</td>
<td align="right">0.6404672</td>
<td align="right">0.9205086</td>
<td align="right">0.9188215</td>
<td align="right">-3708.756</td>
<td align="right">-3645.919</td>
<td align="right">7527.511</td>
<td align="right">7731.402</td>
<td align="right">301</td>
<td align="right">7556.973</td>
<td align="right">0.09545114</td>
<td align="right">0.07401474</td>
<td align="right">0.1170901</td>
<td align="right">0.9</td>
<td align="right">0.0005105831</td>
<td align="right">0.05</td>
<td align="right">0.8865094</td>
<td align="right">0.08</td>
<td align="right">0.09058154</td>
<td align="right">0.09922711</td>
<td align="right">0.07396705</td>
<td align="right">0.07396705</td>
<td align="right">0.08102684</td>
<td align="right">0.07593932</td>
<td align="right">0.08490274</td>
<td align="right">0.08666555</td>
<td align="right">0.07878154</td>
<td align="right">171.0364</td>
<td align="right">192.2328</td>
<td align="right">0.9945417</td>
<td align="right">0.9888775</td>
<td align="right">0.4880621</td>
<td align="right">0.8862824</td>
<td align="right">0.7829676</td>
</tr>
<tr class="even">
<td align="left">textual =~ x6</td>
<td align="right">55</td>
<td align="right">0.2094712</td>
<td align="right">126.1017</td>
<td align="right">53</td>
<td align="right">6.781510e-08</td>
<td align="right">967.2277</td>
<td align="right">72</td>
<td align="right">0</td>
<td align="right">0.9183429</td>
<td align="right">0.8890697</td>
<td align="right">0.8890697</td>
<td align="right">0.8228877</td>
<td align="right">0.8696257</td>
<td align="right">0.6401411</td>
<td align="right">0.9200400</td>
<td align="right">0.9183429</td>
<td align="right">-3708.970</td>
<td align="right">-3645.919</td>
<td align="right">7527.939</td>
<td align="right">7731.831</td>
<td align="right">301</td>
<td align="right">7557.402</td>
<td align="right">0.09573207</td>
<td align="right">0.07431662</td>
<td align="right">0.1173566</td>
<td align="right">0.9</td>
<td align="right">0.0004714805</td>
<td align="right">0.05</td>
<td align="right">0.8906284</td>
<td align="right">0.08</td>
<td align="right">0.09083322</td>
<td align="right">0.09950281</td>
<td align="right">0.07410183</td>
<td align="right">0.07410183</td>
<td align="right">0.08117449</td>
<td align="right">0.07591724</td>
<td align="right">0.08487806</td>
<td align="right">0.08692868</td>
<td align="right">0.07887388</td>
<td align="right">170.4587</td>
<td align="right">191.5831</td>
<td align="right">0.9945223</td>
<td align="right">0.9888379</td>
<td align="right">0.4880526</td>
<td align="right">0.8856519</td>
<td align="right">0.7843909</td>
</tr>
<tr class="odd">
<td align="left">speed =~ x7</td>
<td align="right">54</td>
<td align="right">0.2096778</td>
<td align="right">126.2260</td>
<td align="right">54</td>
<td align="right">1.025522e-07</td>
<td align="right">967.2277</td>
<td align="right">72</td>
<td align="right">0</td>
<td align="right">0.9193211</td>
<td align="right">0.8924281</td>
<td align="right">0.8924281</td>
<td align="right">0.8259961</td>
<td align="right">0.8694971</td>
<td align="right">0.6521228</td>
<td align="right">0.9209113</td>
<td align="right">0.9193211</td>
<td align="right">-3709.032</td>
<td align="right">-3645.919</td>
<td align="right">7526.064</td>
<td align="right">7726.248</td>
<td align="right">301</td>
<td align="right">7554.990</td>
<td align="right">0.09427178</td>
<td align="right">0.07294522</td>
<td align="right">0.1157694</td>
<td align="right">0.9</td>
<td align="right">0.0006413723</td>
<td align="right">0.05</td>
<td align="right">0.8700985</td>
<td align="right">0.08</td>
<td align="right">0.09083246</td>
<td align="right">0.09950198</td>
<td align="right">0.07408629</td>
<td align="right">0.07408629</td>
<td align="right">0.08115747</td>
<td align="right">0.07588300</td>
<td align="right">0.08483978</td>
<td align="right">0.08701594</td>
<td align="right">0.07888117</td>
<td align="right">173.0574</td>
<td align="right">194.3175</td>
<td align="right">0.9945284</td>
<td align="right">0.9890567</td>
<td align="right">0.4972642</td>
<td align="right">0.8869410</td>
<td align="right">0.7781595</td>
</tr>
<tr class="even">
<td align="left">speed =~ x8</td>
<td align="right">55</td>
<td align="right">0.1956719</td>
<td align="right">117.7945</td>
<td align="right">53</td>
<td align="right">7.944429e-07</td>
<td align="right">967.2277</td>
<td align="right">72</td>
<td align="right">0</td>
<td align="right">0.9276224</td>
<td align="right">0.9016757</td>
<td align="right">0.9016757</td>
<td align="right">0.8345553</td>
<td align="right">0.8782143</td>
<td align="right">0.6464633</td>
<td align="right">0.9291266</td>
<td align="right">0.9276224</td>
<td align="right">-3704.816</td>
<td align="right">-3645.919</td>
<td align="right">7519.632</td>
<td align="right">7723.523</td>
<td align="right">301</td>
<td align="right">7549.095</td>
<td align="right">0.09012863</td>
<td align="right">0.06825194</td>
<td align="right">0.1120610</td>
<td align="right">0.9</td>
<td align="right">0.0020887270</td>
<td align="right">0.05</td>
<td align="right">0.7884347</td>
<td align="right">0.08</td>
<td align="right">0.08505258</td>
<td align="right">0.09317044</td>
<td align="right">0.06962993</td>
<td align="right">0.06962993</td>
<td align="right">0.07627577</td>
<td align="right">0.07185163</td>
<td align="right">0.08033257</td>
<td align="right">0.07951405</td>
<td align="right">0.07475212</td>
<td align="right">182.4095</td>
<td align="right">205.0236</td>
<td align="right">0.9949273</td>
<td align="right">0.9896632</td>
<td align="right">0.4882514</td>
<td align="right">0.8979580</td>
<td align="right">0.7567922</td>
</tr>
<tr class="odd">
<td align="left">speed =~ x9</td>
<td align="right">55</td>
<td align="right">0.1829277</td>
<td align="right">110.1225</td>
<td align="right">53</td>
<td align="right">6.944395e-06</td>
<td align="right">967.2277</td>
<td align="right">72</td>
<td align="right">0</td>
<td align="right">0.9361922</td>
<td align="right">0.9133178</td>
<td align="right">0.9133178</td>
<td align="right">0.8453308</td>
<td align="right">0.8861463</td>
<td align="right">0.6523021</td>
<td align="right">0.9375183</td>
<td align="right">0.9361922</td>
<td align="right">-3700.980</td>
<td align="right">-3645.919</td>
<td align="right">7511.960</td>
<td align="right">7715.851</td>
<td align="right">301</td>
<td align="right">7541.423</td>
<td align="right">0.08462473</td>
<td align="right">0.06218782</td>
<td align="right">0.1069052</td>
<td align="right">0.9</td>
<td align="right">0.0073729473</td>
<td align="right">0.05</td>
<td align="right">0.6513022</td>
<td align="right">0.08</td>
<td align="right">0.08091091</td>
<td align="right">0.08863346</td>
<td align="right">0.06704524</td>
<td align="right">0.06704524</td>
<td align="right">0.07344438</td>
<td align="right">0.07139784</td>
<td align="right">0.07982521</td>
<td align="right">0.06937939</td>
<td align="right">0.07245304</td>
<td align="right">195.0479</td>
<td align="right">219.2374</td>
<td align="right">0.9954041</td>
<td align="right">0.9906347</td>
<td align="right">0.4884853</td>
<td align="right">0.9094749</td>
<td align="right">0.7313039</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># saved_partial$models$`visual =~ x1`</span></span>
<span><span class="co"># saved_partial$models$`visual =~ x2`</span></span>
<span><span class="co"># and so on</span></span></code></pre></div>
<p>In our case, one parameter <code>speed =~ x9</code> clearly can
improve the overall model to be equal to the original configural model.
I could then keep exploring steps and/or partial invariance for other
constraints.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">saved_mgcfa.partial</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mgcfa.html">mgcfa</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">HS.model</span>,</span>
<span>                     <span class="co"># dataset in data frame </span></span>
<span>                     data <span class="op">=</span> <span class="va">HolzingerSwineford1939</span>, </span>
<span>                     <span class="co"># grouping variable column </span></span>
<span>                     group <span class="op">=</span> <span class="st">"sex"</span>,</span>
<span>                     <span class="co"># lavaan syntax for group constraints</span></span>
<span>                     group.equal <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"loadings"</span>, <span class="st">"intercepts"</span>, <span class="st">"residuals"</span><span class="op">)</span>, </span>
<span>                     <span class="co"># any other lavaan cfa arguments</span></span>
<span>                     meanstructure <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                     group.partial <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"speed =~ x9"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">saved_mgcfa.partial</span><span class="op">$</span><span class="va">model_fit</span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="5%">
<col width="5%">
<col width="5%">
<col width="5%">
<col width="5%">
<col width="2%">
<col width="5%">
<col width="9%">
<col width="5%">
<col width="5%">
<col width="5%">
<col width="5%">
<col width="4%">
<col width="8%">
<col width="2%">
<col width="3%">
<col width="5%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="right">agfi</th>
<th align="right">AIC</th>
<th align="right">BIC</th>
<th align="right">cfi</th>
<th align="right">chisq</th>
<th align="right">npar</th>
<th align="right">rmsea</th>
<th align="right">rmsea.conf.high</th>
<th align="right">srmr</th>
<th align="right">tli</th>
<th align="left">converged</th>
<th align="left">estimator</th>
<th align="right">ngroups</th>
<th align="left">missing_method</th>
<th align="right">nobs</th>
<th align="right">norig</th>
<th align="right">nexcluded</th>
<th align="left">model</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">0.9911676</td>
<td align="right">7535.490</td>
<td align="right">7646.703</td>
<td align="right">0.9305597</td>
<td align="right">85.30552</td>
<td align="right">30</td>
<td align="right">0.0921215</td>
<td align="right">0.1136780</td>
<td align="right">0.0595238</td>
<td align="right">0.8958395</td>
<td align="left">TRUE</td>
<td align="left">ML</td>
<td align="right">1</td>
<td align="left">listwise</td>
<td align="right">301</td>
<td align="right">301</td>
<td align="right">0</td>
<td align="left">Overall</td>
</tr>
<tr class="even">
<td align="right">0.9890620</td>
<td align="right">3671.257</td>
<td align="right">3760.765</td>
<td align="right">0.9063262</td>
<td align="right">61.39462</td>
<td align="right">30</td>
<td align="right">0.1033053</td>
<td align="right">0.1356260</td>
<td align="right">0.0748731</td>
<td align="right">0.8594893</td>
<td align="left">TRUE</td>
<td align="left">ML</td>
<td align="right">1</td>
<td align="left">listwise</td>
<td align="right">146</td>
<td align="right">146</td>
<td align="right">0</td>
<td align="left">Group 1</td>
</tr>
<tr class="odd">
<td align="right">0.9911447</td>
<td align="right">3846.376</td>
<td align="right">3937.679</td>
<td align="right">0.9588720</td>
<td align="right">44.40059</td>
<td align="right">30</td>
<td align="right">0.0740542</td>
<td align="right">0.1076979</td>
<td align="right">0.0525321</td>
<td align="right">0.9383081</td>
<td align="left">TRUE</td>
<td align="left">ML</td>
<td align="right">1</td>
<td align="left">listwise</td>
<td align="right">155</td>
<td align="right">155</td>
<td align="right">0</td>
<td align="left">Group 2</td>
</tr>
<tr class="even">
<td align="right">0.9901345</td>
<td align="right">7517.633</td>
<td align="right">7740.060</td>
<td align="right">0.9354408</td>
<td align="right">105.79522</td>
<td align="right">60</td>
<td align="right">0.0894452</td>
<td align="right">0.1125390</td>
<td align="right">0.0633686</td>
<td align="right">0.9031611</td>
<td align="left">TRUE</td>
<td align="left">ML</td>
<td align="right">2</td>
<td align="left">listwise</td>
<td align="right">301</td>
<td align="right">301</td>
<td align="right">0</td>
<td align="left">Configural</td>
</tr>
<tr class="odd">
<td align="right">0.9906347</td>
<td align="right">7511.960</td>
<td align="right">7715.851</td>
<td align="right">0.9361922</td>
<td align="right">110.12247</td>
<td align="right">55</td>
<td align="right">0.0846247</td>
<td align="right">0.1069052</td>
<td align="right">0.0670452</td>
<td align="right">0.9133178</td>
<td align="left">TRUE</td>
<td align="left">ML</td>
<td align="right">2</td>
<td align="left">listwise</td>
<td align="right">301</td>
<td align="right">301</td>
<td align="right">0</td>
<td align="left">loadings</td>
</tr>
<tr class="even">
<td align="right">0.9900717</td>
<td align="right">7519.422</td>
<td align="right">7701.070</td>
<td align="right">0.9211555</td>
<td align="right">129.58375</td>
<td align="right">49</td>
<td align="right">0.0891575</td>
<td align="right">0.1099955</td>
<td align="right">0.0723841</td>
<td align="right">0.9037830</td>
<td align="left">TRUE</td>
<td align="left">ML</td>
<td align="right">2</td>
<td align="left">listwise</td>
<td align="right">301</td>
<td align="right">301</td>
<td align="right">0</td>
<td align="left">intercepts</td>
</tr>
<tr class="odd">
<td align="right">0.9896637</td>
<td align="right">7522.363</td>
<td align="right">7670.647</td>
<td align="right">0.9078166</td>
<td align="right">150.52509</td>
<td align="right">40</td>
<td align="right">0.0897988</td>
<td align="right">0.1091696</td>
<td align="right">0.0846108</td>
<td align="right">0.9023941</td>
<td align="left">TRUE</td>
<td align="left">ML</td>
<td align="right">2</td>
<td align="left">listwise</td>
<td align="right">301</td>
<td align="right">301</td>
<td align="right">0</td>
<td align="left">residuals</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="plotting-mi">Plotting MI<a class="anchor" aria-label="anchor" href="#plotting-mi"></a>
</h2>
<p>The package then includes a visualization tool for the measurement
invariance. Plots are parameter specific, so we could examine
<code>speed =~ x9</code> for the strength and direction of the
invariance.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>                          <span class="co"># a table of tidy coefficients, use broom::tidy </span></span>
<span>                          <span class="co"># and create "model" column if you don't use mgcfa</span></span>
<span>                          <span class="co"># be sure to use the partial model or one with out </span></span>
<span>                          <span class="co"># constraints or this graph will be boring</span></span>
<span><span class="va">saved_mi_plots</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_mi.html">plot_mi</a></span><span class="op">(</span>data_coef <span class="op">=</span> <span class="va">saved_mgcfa.partial</span><span class="op">$</span><span class="va">model_coef</span>,</span>
<span>                          <span class="co"># which model do you want to plot from model column</span></span>
<span>                          model_step <span class="op">=</span> <span class="st">"loadings"</span>, </span>
<span>                          <span class="co"># name of observed item</span></span>
<span>                          item_name <span class="op">=</span> <span class="st">"x9"</span>, </span>
<span>                          <span class="co"># LV limits to graph</span></span>
<span>                          x_limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span>, </span>
<span>                          <span class="co"># Y min and max in data</span></span>
<span>                          y_limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">HolzingerSwineford1939</span><span class="op">$</span><span class="va">x9</span><span class="op">)</span>,</span>
<span>                                       <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">HolzingerSwineford1939</span><span class="op">$</span><span class="va">x9</span><span class="op">)</span><span class="op">)</span>, </span>
<span>                          <span class="co"># what ci do you want</span></span>
<span>                          conf.level <span class="op">=</span> <span class="fl">.95</span>, </span>
<span>                          <span class="co"># what model results do you want</span></span>
<span>                          model_results <span class="op">=</span> <span class="va">saved_mgcfa.partial</span><span class="op">$</span><span class="va">invariance_models</span><span class="op">$</span><span class="va">model.loadings</span>, </span>
<span>                          <span class="co"># which latent is the observed variable on</span></span>
<span>                          <span class="co"># important for cross-loaded variables</span></span>
<span>                          lv_name <span class="op">=</span> <span class="st">"speed"</span>, </span>
<span>                          <span class="co"># if you have more than two groups, which two do you want</span></span>
<span>                          plot_groups <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="va">saved_mi_plots</span><span class="op">$</span><span class="va">complete</span></span></code></pre></div>
<p><img src="Package-Tutorial_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<p>The plots are explained at length in the preprint: <a href="https://osf.io/9hzfe/" class="external-link uri">https://osf.io/9hzfe/</a> but
short version:</p>
<p>Observed variable information:</p>
<ol style="list-style-type: decimal">
<li>Intercepts are plotted on the left side as the dots on the
y-axis</li>
<li>Loadings are plotted as theh slope of the lines on the left hand
side</li>
<li>Residuals are plotted as the geom violin on the left hand side</li>
</ol>
<p>Latent variable information:</p>
<ol start="4" style="list-style-type: decimal">
<li>LV distribution is plotted on the right hand side</li>
<li>LV means are represented as the solid lines for each group</li>
</ol>
<p>This plot is the combination of three smaller plots, and they are
included separately so you can modify them with <code>ggplot2</code> if
you like. We can clearly see that group 1 has a shallower slope (i.e., a
smaller factor loading) than group 2.</p>
</div>
<div class="section level2">
<h2 id="pre-registration-replication-and-registered-reports">Pre-registration, replication, and registered reports<a class="anchor" aria-label="anchor" href="#pre-registration-replication-and-registered-reports"></a>
</h2>
<p>Several unanswered questions:</p>
<ol style="list-style-type: decimal">
<li>How big is this effect? - We could use <span class="math inline">\(d_{macs}\)</span>, however this statistic is based
on intercepts <em>and</em> loadings simultaneously.</li>
<li>How much should I expect this model to replicate? - If I believe
that this data is truly representative of the population, how does this
model replicate in comparison to a random model?</li>
</ol>
<p>This information would give you an idea of what to expect in a
potential replication and/o pre-registration.</p>
<div class="section level3">
<h3 id="replication-at-model-level">Replication at model level<a class="anchor" aria-label="anchor" href="#replication-at-model-level"></a>
</h3>
<p>Here we will bootstrap the mgcfa procedure to determine the
“replication rate” if our data was representative of the true
population. The data is bootstrapped and the steps for MGCFA are
examined for invariance. This model is compared to a model of the
bootstrapped data with random group assignment.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">saved_boot_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bootstrap_model.html">bootstrap_model</a></span><span class="op">(</span></span>
<span>  <span class="co"># saved configural model to start at</span></span>
<span>  saved_configural <span class="op">=</span> <span class="va">saved_mgcfa</span><span class="op">$</span><span class="va">model_configural</span>,</span>
<span>  <span class="co"># dataset for the analysis</span></span>
<span>  data <span class="op">=</span> <span class="va">HolzingerSwineford1939</span>,</span>
<span>  <span class="co"># model lavaan syntax</span></span>
<span>  model <span class="op">=</span> <span class="va">HS.model</span>,</span>
<span>  <span class="co"># group variable in the dataset</span></span>
<span>  group <span class="op">=</span> <span class="st">"sex"</span>, </span>
<span>  <span class="co"># number of bootstraps</span></span>
<span>  <span class="co"># this is set to a low number to compile quickly for cran</span></span>
<span>  nboot <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  <span class="co"># name of the fit measure you want to use, make sure it's lavaan</span></span>
<span>  invariance_index <span class="op">=</span> <span class="st">"cfi"</span>,</span>
<span>  <span class="co"># rule for the difference in fit indices</span></span>
<span>  invariance_rule <span class="op">=</span> <span class="fl">.01</span>,</span>
<span>  <span class="co"># what order of steps do you want to test? </span></span>
<span>  group.equal <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"loadings"</span>, <span class="st">"intercepts"</span>, <span class="st">"residuals"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Finished Bootstrap Number: 1</span></span>
<span><span class="co">#&gt; Finished Bootstrap Number: 2</span></span>
<span><span class="co">#&gt; Finished Bootstrap Number: 3</span></span>
<span><span class="co">#&gt; Finished Bootstrap Number: 4</span></span>
<span><span class="co">#&gt; Finished Bootstrap Number: 5</span></span>
<span><span class="co">#&gt; Finished Bootstrap Number: 6</span></span>
<span><span class="co">#&gt; Finished Bootstrap Number: 7</span></span>
<span><span class="co">#&gt; Finished Bootstrap Number: 8</span></span>
<span><span class="co">#&gt; Finished Bootstrap Number: 9</span></span>
<span><span class="co">#&gt; Finished Bootstrap Number: 10</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">saved_boot_model</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="12%">
<col width="16%">
<col width="24%">
<col width="10%">
<col width="11%">
<col width="11%">
<col width="12%">
</colgroup>
<thead><tr class="header">
<th align="left">model</th>
<th align="right">non_invariant</th>
<th align="right">random_non_invariant</th>
<th align="right">h_nmi</th>
<th align="right">h_mi</th>
<th align="right">h_nmi_p</th>
<th align="right">h_mi_p</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">intercepts</td>
<td align="right">0.3</td>
<td align="right">0</td>
<td align="right">1.159280</td>
<td align="right">-1.159280</td>
<td align="right">0.3690101</td>
<td align="right">-0.3690101</td>
</tr>
<tr class="even">
<td align="left">loadings</td>
<td align="right">0.7</td>
<td align="right">0</td>
<td align="right">1.982313</td>
<td align="right">-1.982313</td>
<td align="right">0.6309899</td>
<td align="right">-0.6309899</td>
</tr>
</tbody>
</table>
<p>This data tells you the proportion of values that were non-invariant
for the bootstrapped and random models. Note: this may not add up to
<code>n_boot</code> because sometimes models fail to converge.
<code>h</code> represents the effect size comparison of the two
proportions (much like a <span class="math inline">\(d\)</span> value).
We can see that it’s likely that our model would not show invariance for
all parameters compared to a random model for the loadings.</p>
</div>
<div class="section level3">
<h3 id="size-of-the-effect-and-replication-at-parameter-level">Size of the effect and replication at parameter level<a class="anchor" aria-label="anchor" href="#size-of-the-effect-and-replication-at-parameter-level"></a>
</h3>
<p>In this function, we will bootstrap our model (up to the step we
claim partial invariance) to determine our replication rate and effect
size. Note: this function is slow depending on the number parameters,
bootstraps, and computer size.</p>
<ol style="list-style-type: decimal">
<li>The saved dataframe of the estimates for each group’s
<em>standardized</em> loading using <code>std.all</code> for the
original model and the random model. This value is like a <span class="math inline">\(\beta\)</span> or effect size - so we can use it
to determine what the effect size of the difference would be if they
were constrained to equal or not. This dataframe is included if you want
to make your own graphs.</li>
<li>The summary dataframe of the bootstrapped results. Note: you will
see NAs when you do not have enough values that fall into the
“invariant” or “non-invariant” separation. Effect sizes are calculated
with <code><a href="../reference/calculate_d.html">calculate_d()</a></code> assuming between subjects grouping
(group 1 versus group 2) using the average standardized parameter as the
mean and the average standard deviation of that parameter as the
standard deviation. A minimum of 10% of bootstraps is required for the
effect size to calculate.</li>
<li>A forest plot style graph of the mean group differences.</li>
<li>A forest plot style graph of the effect sizes of the group
differences with emphasis on the number of bootstraps included in each
calculation.</li>
</ol>
<p>Note: invariance is FALSE for non-invariant, TRUE for invariant
using:
<code>(original model fit - model relaxed fit) &lt;= rule</code></p>
<p>The last three are ggplot objects, so you can edit them from the
saved output.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">saved_boot_partial</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bootstrap_partial.html">bootstrap_partial</a></span><span class="op">(</span></span>
<span>  <span class="co"># the model you want to test </span></span>
<span>  <span class="co"># use the model before your invariant one </span></span>
<span>  <span class="co"># similar set up to partial_mi</span></span>
<span>  saved_model <span class="op">=</span> <span class="va">saved_mgcfa.partial</span><span class="op">$</span><span class="va">model_configural</span>,</span>
<span>  <span class="co"># the dataframe</span></span>
<span>  data <span class="op">=</span> <span class="va">HolzingerSwineford1939</span>,</span>
<span>  <span class="co"># the original model syntax</span></span>
<span>  model <span class="op">=</span> <span class="va">HS.model</span>,</span>
<span>  <span class="co"># the grouping variable column</span></span>
<span>  group <span class="op">=</span> <span class="st">"sex"</span>,</span>
<span>  <span class="co"># run more, but this package vignette needs to knit fast</span></span>
<span>  nboot <span class="op">=</span> <span class="fl">20</span>,</span>
<span>  <span class="co"># what index are you using for invariance?</span></span>
<span>  <span class="co"># match this to lavaan's name under fitmeasures()</span></span>
<span>  invariance_index <span class="op">=</span> <span class="st">"cfi"</span>,</span>
<span>  <span class="co"># what rule are you using?</span></span>
<span>  invariance_rule <span class="op">=</span> <span class="fl">.01</span>,</span>
<span>  <span class="co"># what are we comparing against? </span></span>
<span>  invariance_compare <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unname.html" class="external-link">unname</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/fitMeasures.html" class="external-link">fitmeasures</a></span><span class="op">(</span><span class="va">saved_mgcfa.partial</span><span class="op">$</span><span class="va">model_configural</span>, <span class="st">"cfi"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  <span class="co"># which step you want to estimate effect size for</span></span>
<span>  partial_step <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"loadings"</span><span class="op">)</span>, </span>
<span>  <span class="co"># which parameters you want to hold constrained</span></span>
<span>  group.equal <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"loadings"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; Finished Bootstrap Number: 1</span></span>
<span><span class="co">#&gt; Finished Bootstrap Number: 2</span></span>
<span><span class="co">#&gt; Finished Bootstrap Number: 3</span></span>
<span><span class="co">#&gt; Finished Bootstrap Number: 4</span></span>
<span><span class="co">#&gt; Finished Bootstrap Number: 5</span></span>
<span><span class="co">#&gt; Finished Bootstrap Number: 6</span></span>
<span><span class="co">#&gt; Finished Bootstrap Number: 7</span></span>
<span><span class="co">#&gt; Finished Bootstrap Number: 8</span></span>
<span><span class="co">#&gt; Finished Bootstrap Number: 9</span></span>
<span><span class="co">#&gt; Finished Bootstrap Number: 10</span></span>
<span><span class="co">#&gt; Finished Bootstrap Number: 11</span></span>
<span><span class="co">#&gt; Finished Bootstrap Number: 12</span></span>
<span><span class="co">#&gt; Finished Bootstrap Number: 13</span></span>
<span><span class="co">#&gt; Finished Bootstrap Number: 14</span></span>
<span><span class="co">#&gt; Finished Bootstrap Number: 15</span></span>
<span><span class="co">#&gt; Finished Bootstrap Number: 16</span></span>
<span><span class="co">#&gt; Finished Bootstrap Number: 17</span></span>
<span><span class="co">#&gt; Finished Bootstrap Number: 18</span></span>
<span><span class="co">#&gt; Finished Bootstrap Number: 19</span></span>
<span><span class="co">#&gt; Finished Bootstrap Number: 20</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">saved_boot_partial</span><span class="op">$</span><span class="va">boot_DF</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="9%">
<col width="6%">
<col width="6%">
<col width="6%">
<col width="6%">
<col width="6%">
<col width="7%">
<col width="10%">
<col width="11%">
<col width="14%">
<col width="15%">
</colgroup>
<thead><tr class="header">
<th align="left">term</th>
<th align="right">boot_1</th>
<th align="right">boot_2</th>
<th align="right">random_1</th>
<th align="right">random_2</th>
<th align="right">boot_fit</th>
<th align="right">random_fit</th>
<th align="right">boot_difference</th>
<th align="right">random_difference</th>
<th align="left">boot_index_difference</th>
<th align="left">random_index_difference</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">visual =~ x1</td>
<td align="right">0.7622804</td>
<td align="right">0.6917330</td>
<td align="right">0.7210561</td>
<td align="right">0.7677601</td>
<td align="right">0.8799049</td>
<td align="right">0.9328097</td>
<td align="right">0.0705474</td>
<td align="right">-0.0467040</td>
<td align="left">FALSE</td>
<td align="left">TRUE</td>
</tr>
<tr class="even">
<td align="left">visual =~ x2</td>
<td align="right">0.5541882</td>
<td align="right">0.2681671</td>
<td align="right">0.4070080</td>
<td align="right">0.4441750</td>
<td align="right">0.8800388</td>
<td align="right">0.9317609</td>
<td align="right">0.2860210</td>
<td align="right">-0.0371670</td>
<td align="left">FALSE</td>
<td align="left">TRUE</td>
</tr>
<tr class="odd">
<td align="left">visual =~ x3</td>
<td align="right">0.6409211</td>
<td align="right">0.5377987</td>
<td align="right">0.5550771</td>
<td align="right">0.6133640</td>
<td align="right">0.8788512</td>
<td align="right">0.9317627</td>
<td align="right">0.1031223</td>
<td align="right">-0.0582869</td>
<td align="left">FALSE</td>
<td align="left">TRUE</td>
</tr>
<tr class="even">
<td align="left">textual =~ x4</td>
<td align="right">0.8365101</td>
<td align="right">0.8142612</td>
<td align="right">0.8193490</td>
<td align="right">0.8298972</td>
<td align="right">0.8799049</td>
<td align="right">0.9328097</td>
<td align="right">0.0222489</td>
<td align="right">-0.0105482</td>
<td align="left">FALSE</td>
<td align="left">TRUE</td>
</tr>
<tr class="odd">
<td align="left">textual =~ x5</td>
<td align="right">0.8534776</td>
<td align="right">0.9178727</td>
<td align="right">0.8752882</td>
<td align="right">0.8957469</td>
<td align="right">0.8819863</td>
<td align="right">0.9358723</td>
<td align="right">-0.0643951</td>
<td align="right">-0.0204587</td>
<td align="left">FALSE</td>
<td align="left">TRUE</td>
</tr>
<tr class="even">
<td align="left">textual =~ x6</td>
<td align="right">0.8627863</td>
<td align="right">0.8495805</td>
<td align="right">0.8795604</td>
<td align="right">0.8186844</td>
<td align="right">0.8797531</td>
<td align="right">0.9322245</td>
<td align="right">0.0132058</td>
<td align="right">0.0608760</td>
<td align="left">FALSE</td>
<td align="left">TRUE</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">saved_boot_partial</span><span class="op">$</span><span class="va">boot_summary</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="4%">
<col width="2%">
<col width="3%">
<col width="3%">
<col width="2%">
<col width="2%">
<col width="6%">
<col width="5%">
<col width="4%">
<col width="3%">
<col width="2%">
<col width="4%">
<col width="4%">
<col width="3%">
<col width="3%">
<col width="6%">
<col width="6%">
<col width="4%">
<col width="4%">
<col width="2%">
<col width="3%">
<col width="3%">
<col width="3%">
<col width="3%">
<col width="3%">
<col width="4%">
</colgroup>
<thead><tr class="header">
<th align="left">term</th>
<th align="left">invariant</th>
<th align="right">mean_boot_1</th>
<th align="right">mean_boot_2</th>
<th align="right">sd_boot_1</th>
<th align="right">sd_boot_2</th>
<th align="right">mean_boot_difference</th>
<th align="right">sd_boot_difference</th>
<th align="right">mean_boot_fit</th>
<th align="right">sd_boot_fit</th>
<th align="right">n_boot</th>
<th align="right">mean_random_1</th>
<th align="right">mean_random_2</th>
<th align="right">sd_random_1</th>
<th align="right">sd_random_2</th>
<th align="right">mean_random_difference</th>
<th align="right">sd_random_difference</th>
<th align="right">mean_random_fit</th>
<th align="right">sd_random_fit</th>
<th align="right">n_random</th>
<th align="right">d_boot_low</th>
<th align="right">d_boot</th>
<th align="right">d_boot_high</th>
<th align="right">d_random_low</th>
<th align="right">d_random</th>
<th align="right">d_random_high</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">speed =~ x7</td>
<td align="left">FALSE</td>
<td align="right">0.5196211</td>
<td align="right">0.5080851</td>
<td align="right">0.1076394</td>
<td align="right">0.1150163</td>
<td align="right">0.0115360</td>
<td align="right">0.0887230</td>
<td align="right">0.8690023</td>
<td align="right">0.0195453</td>
<td align="right">19</td>
<td align="right">0.5264127</td>
<td align="right">0.5251088</td>
<td align="right">0.0907479</td>
<td align="right">0.0808700</td>
<td align="right">0.0013038</td>
<td align="right">0.0555496</td>
<td align="right">0.9027967</td>
<td align="right">0.0145039</td>
<td align="right">16</td>
<td align="right">-0.5334934</td>
<td align="right">0.1035652</td>
<td align="right">0.7391925</td>
<td align="right">-0.6779188</td>
<td align="right">0.0151695</td>
<td align="right">0.7080061</td>
</tr>
<tr class="even">
<td align="left">speed =~ x8</td>
<td align="left">FALSE</td>
<td align="right">0.7795141</td>
<td align="right">0.6839817</td>
<td align="right">0.0945686</td>
<td align="right">0.1191939</td>
<td align="right">0.0955324</td>
<td align="right">0.1571052</td>
<td align="right">0.8753826</td>
<td align="right">0.0172632</td>
<td align="right">17</td>
<td align="right">0.6853855</td>
<td align="right">0.6994146</td>
<td align="right">0.1015175</td>
<td align="right">0.0919236</td>
<td align="right">-0.0140291</td>
<td align="right">0.0930860</td>
<td align="right">0.9016096</td>
<td align="right">0.0141866</td>
<td align="right">14</td>
<td align="right">0.1753468</td>
<td align="right">0.8879455</td>
<td align="right">1.5879826</td>
<td align="right">-0.8853198</td>
<td align="right">-0.1448698</td>
<td align="right">0.5983446</td>
</tr>
<tr class="odd">
<td align="left">speed =~ x9</td>
<td align="left">FALSE</td>
<td align="right">0.6457105</td>
<td align="right">0.7004198</td>
<td align="right">0.1924116</td>
<td align="right">0.1957149</td>
<td align="right">-0.0547093</td>
<td align="right">0.3778449</td>
<td align="right">0.8831801</td>
<td align="right">0.0185805</td>
<td align="right">17</td>
<td align="right">0.7047374</td>
<td align="right">0.7028886</td>
<td align="right">0.1137276</td>
<td align="right">0.0946776</td>
<td align="right">0.0018488</td>
<td align="right">0.1594564</td>
<td align="right">0.9003040</td>
<td align="right">0.0125376</td>
<td align="right">13</td>
<td align="right">-0.9555058</td>
<td align="right">-0.2819048</td>
<td align="right">0.3960393</td>
<td align="right">-0.7512912</td>
<td align="right">0.0176691</td>
<td align="right">0.7862632</td>
</tr>
<tr class="even">
<td align="left">textual =~ x4</td>
<td align="left">FALSE</td>
<td align="right">0.8486367</td>
<td align="right">0.8409722</td>
<td align="right">0.0285865</td>
<td align="right">0.0386116</td>
<td align="right">0.0076645</td>
<td align="right">0.0459136</td>
<td align="right">0.8690023</td>
<td align="right">0.0195453</td>
<td align="right">19</td>
<td align="right">0.8354978</td>
<td align="right">0.8400173</td>
<td align="right">0.0296516</td>
<td align="right">0.0261268</td>
<td align="right">-0.0045196</td>
<td align="right">0.0273024</td>
<td align="right">0.9027967</td>
<td align="right">0.0145039</td>
<td align="right">16</td>
<td align="right">-0.4139445</td>
<td align="right">0.2256200</td>
<td align="right">0.8620820</td>
<td align="right">-0.8545440</td>
<td align="right">-0.1617324</td>
<td align="right">0.5337541</td>
</tr>
<tr class="odd">
<td align="left">textual =~ x5</td>
<td align="left">FALSE</td>
<td align="right">0.8684702</td>
<td align="right">0.8615105</td>
<td align="right">0.0250995</td>
<td align="right">0.0279970</td>
<td align="right">0.0069598</td>
<td align="right">0.0383451</td>
<td align="right">0.8697807</td>
<td align="right">0.0197687</td>
<td align="right">19</td>
<td align="right">0.8596082</td>
<td align="right">0.8678306</td>
<td align="right">0.0254790</td>
<td align="right">0.0234293</td>
<td align="right">-0.0082224</td>
<td align="right">0.0366053</td>
<td align="right">0.9015160</td>
<td align="right">0.0143936</td>
<td align="right">15</td>
<td align="right">-0.3787739</td>
<td align="right">0.2617661</td>
<td align="right">0.8987146</td>
<td align="right">-1.0540163</td>
<td align="right">-0.3359419</td>
<td align="right">0.3880182</td>
</tr>
<tr class="even">
<td align="left">textual =~ x6</td>
<td align="left">FALSE</td>
<td align="right">0.8379896</td>
<td align="right">0.8337553</td>
<td align="right">0.0358525</td>
<td align="right">0.0384939</td>
<td align="right">0.0042343</td>
<td align="right">0.0662491</td>
<td align="right">0.8697178</td>
<td align="right">0.0199661</td>
<td align="right">19</td>
<td align="right">0.8240566</td>
<td align="right">0.8346934</td>
<td align="right">0.0219759</td>
<td align="right">0.0272913</td>
<td align="right">-0.0106368</td>
<td align="right">0.0345482</td>
<td align="right">0.8994451</td>
<td align="right">0.0124834</td>
<td align="right">14</td>
<td align="right">-0.5233872</td>
<td align="right">0.1138350</td>
<td align="right">0.7494845</td>
<td align="right">-1.1751386</td>
<td align="right">-0.4293090</td>
<td align="right">0.3245439</td>
</tr>
<tr class="odd">
<td align="left">visual =~ x1</td>
<td align="left">FALSE</td>
<td align="right">0.7617583</td>
<td align="right">0.7717427</td>
<td align="right">0.0536802</td>
<td align="right">0.0936449</td>
<td align="right">-0.0099843</td>
<td align="right">0.0953033</td>
<td align="right">0.8690023</td>
<td align="right">0.0195453</td>
<td align="right">19</td>
<td align="right">0.7586218</td>
<td align="right">0.7528580</td>
<td align="right">0.0783687</td>
<td align="right">0.0622790</td>
<td align="right">0.0057639</td>
<td align="right">0.0677692</td>
<td align="right">0.9027967</td>
<td align="right">0.0145039</td>
<td align="right">16</td>
<td align="right">-0.7665190</td>
<td align="right">-0.1308135</td>
<td align="right">0.5066984</td>
<td align="right">-0.6124997</td>
<td align="right">0.0814309</td>
<td align="right">0.7740114</td>
</tr>
<tr class="even">
<td align="left">visual =~ x2</td>
<td align="left">FALSE</td>
<td align="right">0.3976032</td>
<td align="right">0.3947906</td>
<td align="right">0.1561932</td>
<td align="right">0.1451780</td>
<td align="right">0.0028126</td>
<td align="right">0.2856944</td>
<td align="right">0.8699898</td>
<td align="right">0.0194511</td>
<td align="right">19</td>
<td align="right">0.4140464</td>
<td align="right">0.4166509</td>
<td align="right">0.0715416</td>
<td align="right">0.1150273</td>
<td align="right">-0.0026045</td>
<td align="right">0.1446466</td>
<td align="right">0.9026524</td>
<td align="right">0.0145275</td>
<td align="right">16</td>
<td align="right">-0.6173871</td>
<td align="right">0.0186528</td>
<td align="right">0.6544345</td>
<td align="right">-0.7199508</td>
<td align="right">-0.0271907</td>
<td align="right">0.6660207</td>
</tr>
<tr class="odd">
<td align="left">visual =~ x3</td>
<td align="left">FALSE</td>
<td align="right">0.6110966</td>
<td align="right">0.5749235</td>
<td align="right">0.1118974</td>
<td align="right">0.1251645</td>
<td align="right">0.0361731</td>
<td align="right">0.2108404</td>
<td align="right">0.8746856</td>
<td align="right">0.0200062</td>
<td align="right">20</td>
<td align="right">0.5759008</td>
<td align="right">0.5787354</td>
<td align="right">0.0625802</td>
<td align="right">0.1019542</td>
<td align="right">-0.0028347</td>
<td align="right">0.1223575</td>
<td align="right">0.8999143</td>
<td align="right">0.0145015</td>
<td align="right">16</td>
<td align="right">-0.3208174</td>
<td align="right">0.3047016</td>
<td align="right">0.9262711</td>
<td align="right">-0.7262358</td>
<td align="right">-0.0335105</td>
<td align="right">0.6597709</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">saved_boot_partial</span><span class="op">$</span><span class="va">boot_effects</span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="15%">
<col width="15%">
<col width="23%">
<col width="10%">
<col width="12%">
<col width="10%">
<col width="12%">
</colgroup>
<thead><tr class="header">
<th align="left">term</th>
<th align="right">non_invariant</th>
<th align="right">random_non_invariant</th>
<th align="right">h_nmi</th>
<th align="right">h_mi</th>
<th align="right">h_nmi_p</th>
<th align="right">h_mi_p</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">speed =~ x7</td>
<td align="right">0.95</td>
<td align="right">0.80</td>
<td align="right">0.4762684</td>
<td align="right">-0.4762684</td>
<td align="right">0.1516009</td>
<td align="right">-0.1516009</td>
</tr>
<tr class="even">
<td align="left">speed =~ x8</td>
<td align="right">0.85</td>
<td align="right">0.70</td>
<td align="right">0.3638807</td>
<td align="right">-0.3638807</td>
<td align="right">0.1158268</td>
<td align="right">-0.1158268</td>
</tr>
<tr class="odd">
<td align="left">speed =~ x9</td>
<td align="right">0.85</td>
<td align="right">0.65</td>
<td align="right">0.4707048</td>
<td align="right">-0.4707048</td>
<td align="right">0.1498300</td>
<td align="right">-0.1498300</td>
</tr>
<tr class="even">
<td align="left">textual =~ x4</td>
<td align="right">0.95</td>
<td align="right">0.80</td>
<td align="right">0.4762684</td>
<td align="right">-0.4762684</td>
<td align="right">0.1516009</td>
<td align="right">-0.1516009</td>
</tr>
<tr class="odd">
<td align="left">textual =~ x5</td>
<td align="right">0.95</td>
<td align="right">0.75</td>
<td align="right">0.5961707</td>
<td align="right">-0.5961707</td>
<td align="right">0.1897670</td>
<td align="right">-0.1897670</td>
</tr>
<tr class="even">
<td align="left">textual =~ x6</td>
<td align="right">0.95</td>
<td align="right">0.70</td>
<td align="right">0.7082527</td>
<td align="right">-0.7082527</td>
<td align="right">0.2254438</td>
<td align="right">-0.2254438</td>
</tr>
<tr class="odd">
<td align="left">visual =~ x1</td>
<td align="right">0.95</td>
<td align="right">0.80</td>
<td align="right">0.4762684</td>
<td align="right">-0.4762684</td>
<td align="right">0.1516009</td>
<td align="right">-0.1516009</td>
</tr>
<tr class="even">
<td align="left">visual =~ x2</td>
<td align="right">0.95</td>
<td align="right">0.80</td>
<td align="right">0.4762684</td>
<td align="right">-0.4762684</td>
<td align="right">0.1516009</td>
<td align="right">-0.1516009</td>
</tr>
<tr class="odd">
<td align="left">visual =~ x3</td>
<td align="right">1.00</td>
<td align="right">0.80</td>
<td align="right">0.9272952</td>
<td align="right">-0.9272952</td>
<td align="right">0.2951672</td>
<td align="right">-0.2951672</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">saved_boot_partial</span><span class="op">$</span><span class="va">invariance_plot</span></span></code></pre></div>
<p><img src="Package-Tutorial_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">saved_boot_partial</span><span class="op">$</span><span class="va">effect_invariance_plot</span></span></code></pre></div>
<p><img src="Package-Tutorial_files/figure-html/unnamed-chunk-8-2.png" width="700"></p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">saved_boot_partial</span><span class="op">$</span><span class="va">density_plot</span></span>
<span><span class="co">#&gt; Picking joint bandwidth of NaN</span></span>
<span><span class="co">#&gt; Picking joint bandwidth of 0.027</span></span>
<span><span class="co">#&gt; Picking joint bandwidth of 0.0448</span></span>
<span><span class="co">#&gt; Picking joint bandwidth of 0.03</span></span></code></pre></div>
<p><img src="Package-Tutorial_files/figure-html/unnamed-chunk-8-3.png" width="700"></p>
<p>I can see very few models are considered “invariant” when
individually relaxing the parameters. These three parameters are the
same ones that showed as the top items to relax to create an invariant
model BUT that doesn’t bootstrap consistently, so it may not replicate.
The randomly assigned group models show an even split of replication,
which you would expect, given it’s “random”.</p>
<p>The boot effects dataframe gives me a potential size of the
non-invariant effect compared to random, illuminating the items that may
not replicate, and my boot summary gives me effect sizes differences
between groups for bootstrapped and random data. I could subtract these
differences to tell how big one might expect them to be as compared to
random or simply review them in my invariance plots.</p>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-brown2015" class="csl-entry">
Brown, Timothy A. 2015. <em>Confirmatory Factor Analysis for Applied
Research</em>. Second edition. Methodology in the Social Sciences. New
York ; London: The Guilford Press.
</div>
<div id="ref-kline2016" class="csl-entry">
Kline, Rex B. 2016. <em>Principles and Practice of Structural Equation
Modeling</em>. Fourth edition. Methodology in the Social Sciences. New
York: The Guilford Press.
</div>
<div id="ref-rosseel2012" class="csl-entry">
Rosseel, Yves. 2012. <span>“Lavaan: An r Package for Structural Equation
Modeling.”</span> <em>Journal of Statistical Software</em> 48 (1): 1–36.
<a href="https://doi.org/10.18637/jss.v048.i02" class="external-link">https://doi.org/10.18637/jss.v048.i02</a>.
</div>
<div id="ref-stark2006" class="csl-entry">
Stark, Stephen, Oleksandr S. Chernyshenko, and Fritz Drasgow. 2006.
<span>“Detecting Differential Item Functioning with Confirmatory Factor
Analysis and Item Response Theory: Toward a Unified Strategy.”</span>
<em>Journal of Applied Psychology</em> 91 (6): 1292–1306. <a href="https://doi.org/10.1037/0021-9010.91.6.1292" class="external-link">https://doi.org/10.1037/0021-9010.91.6.1292</a>.
</div>
<div id="ref-tay2015" class="csl-entry">
Tay, Louis, Adam W Meade, and Mengyang Cao. 2015. <span>“An Overview and
Practical Guide to IRT Measurement Equivalence Analysis.”</span>
<em>Organizational Research Methods</em> 18 (1): 3–46. <a href="https://doi.org/10.1177/1094428114553062" class="external-link">https://doi.org/10.1177/1094428114553062</a>.
</div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Erin M. Buchanan.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
